#!/usr/bin/env ruby
lib_dir = File.dirname(__FILE__)
require File.expand_path(File.join(lib_dir, '../lib/roy'))

config = {
  :watchers => [{
    :perform => :watcher_life_cycle_hook,
    :queue => {
      :name => "#{ENV['QUEUE_PREFIX']}-test",
      :create_options => {
        :visibility_timeout => 90,
        :maximum_message_size => 262144
      },
      :poll_options => {
        :wait_time_seconds => 10,
        :idle_timeout => 5
      },
    }
  }]
}

Roy.new(config).start_watchers

